{"ast":null,"code":"import _objectSpread from \"/Users/spencer.jensen/Desktop/BYU Winter 2020/AppDev/sprint4/reactfiles/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"/Users/spencer.jensen/Desktop/BYU Winter 2020/AppDev/sprint4/reactfiles/src/context-provider.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport AppContext from './context';\nimport App from './App';\nimport produce from 'immer';\n/** The context provider for our app */\n\nexport default class AppProvider extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.clearCart = () => {\n      this.setState(state => produce(state, draft => {\n        draft.cart = {};\n        draft.cartCount = 0;\n        draft.cartTotal = 0;\n      }));\n      return;\n    };\n\n    this.getCartTotal = () => {\n      return this.state.cartTotal;\n    };\n\n    this.removeFromCart = id => {\n      this.setState(state => produce(state, draft => {\n        if (draft.cart[id]) {\n          draft.cartCount -= draft.cart[id];\n          delete draft.cart[id];\n        } // draft.cartCount = 0;\n        // for(let q in Object.values(draft.cart)){\n        //     draft.cartCount += q;\n        // }\n\n      }));\n    };\n\n    this.addToCart = id => {\n      this.setState(state => produce(state, draft => {\n        //console.log(state.cart);\n        if (!draft.cart[id]) {\n          draft.cart[id] = 1;\n          draft.cartCount += 1; //console.log('added product to cart')\n        } else {\n          draft.cart[id] += 1;\n          draft.cartCount += 1; //console.log('added 1 to quantity')\n        }\n      })); //console.log(this.state.cart)\n    };\n\n    this.actions = {\n      addToCart: this.addToCart,\n      removeFromCart: this.removeFromCart,\n      getCartTotal: this.getCartTotal,\n      clearCart: this.clearCart\n    };\n    this.state = {\n      categories: {},\n      products: {},\n      cart: {},\n      cartCount: 0,\n      cartTotal: 0\n    };\n  }\n\n  render() {\n    return React.createElement(AppContext.Provider, {\n      value: _objectSpread({}, this.state, {}, this.actions),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, React.createElement(App, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }));\n  }\n\n  async componentDidMount() {\n    const resp = await axios.get('http://localhost:8000/api/category');\n    const resp2 = await axios.get('http://localhost:8000/api/product');\n    this.setState({\n      categories: resp.data\n    });\n    this.setState({\n      products: resp2.data\n    });\n  }\n\n}","map":{"version":3,"sources":["/Users/spencer.jensen/Desktop/BYU Winter 2020/AppDev/sprint4/reactfiles/src/context-provider.js"],"names":["React","axios","AppContext","App","produce","AppProvider","Component","constructor","props","clearCart","setState","state","draft","cart","cartCount","cartTotal","getCartTotal","removeFromCart","id","addToCart","actions","categories","products","render","componentDidMount","resp","get","resp2","data"],"mappings":"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","sourcesContent":["import React from 'react'\nimport axios from 'axios'\nimport AppContext from './context'\nimport App from './App'\nimport produce from 'immer'\n\n/** The context provider for our app */\nexport default class AppProvider extends React.Component {\n\n    constructor(props) {\n        super(props)\n\n        this.actions = {\n            addToCart: this.addToCart,\n            removeFromCart: this.removeFromCart,\n            getCartTotal: this.getCartTotal,\n            clearCart: this.clearCart,\n        }\n        this.state = {\n            categories: {},\n            products: {},\n            cart: {},\n            cartCount: 0,\n            cartTotal: 0,\n        }\n    }\n\n    clearCart = () => {\n        this.setState(state => produce(state, draft => {\n            draft.cart = {}\n            draft.cartCount = 0\n            draft.cartTotal = 0\n        }))\n        return\n    }\n\n    getCartTotal = () => {\n        return this.state.cartTotal\n    }\n\n    removeFromCart = (id) => {\n        this.setState(state => produce(state, draft => {\n            if(draft.cart[id]){\n\n                draft.cartCount -= draft.cart[id];\n                delete draft.cart[id];\n\n            }\n            // draft.cartCount = 0;\n            // for(let q in Object.values(draft.cart)){\n            //     draft.cartCount += q;\n            // }\n        }))\n    }\n\n    addToCart = (id) => {\n        this.setState(state => produce( state, draft => {\n            //console.log(state.cart);\n            if(!draft.cart[id]){\n                draft.cart[id] = 1\n                draft.cartCount += 1\n                //console.log('added product to cart')\n            }\n            else{\n                draft.cart[id] += 1\n                draft.cartCount += 1\n                //console.log('added 1 to quantity')\n            }\n            \n        }))\n        //console.log(this.state.cart)\n    }\n\n    render() {\n        return (\n            <AppContext.Provider value={{...this.state, ...this.actions}}>\n                <App />\n            </AppContext.Provider>\n        )\n    }\n\n    async componentDidMount() {\n        const resp = await axios.get('http://localhost:8000/api/category')\n        const resp2 = await axios.get('http://localhost:8000/api/product')\n        \n        this.setState({categories: resp.data})\n        this.setState({products: resp2.data})\n    }\n\n}"]},"metadata":{},"sourceType":"module"}